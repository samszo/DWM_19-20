<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
<button onclick="getItems()">Affiche les items omk</button>
<div id="result"></div> 
<script>
    //documentation de l'API omeka s : https://omeka.org/s/docs/developer/api/rest_api/
    //initialisation des variables
    var urlOmk = "http://193.54.152.41/DWM1920/Houdinews"
    var urlAPI = urlOmk+"/api/";

    //récupération des items
    function getItems(){
        var url = urlAPI+"items";
        var myHeaders = new Headers();
        var myInit = { method: 'GET',
               headers: myHeaders,
               mode: 'cors',
               cache: 'default' };
        var myRequest = new Request(url,myInit);

        fetch(myRequest).then(function(response) {
            var contentType = response.headers.get("content-type");
            if(contentType && contentType.indexOf("application/json") !== -1) {
                return response.json().then(function(json) {
                // traitement du JSON
                });
            } else {
                console.log("Oops, nous n'avons pas du JSON!");
            }
            });
    }
    
    /*
    d3.json(urlAPI+"items").then(function(data) {
        console.log(data);
        //supprime les anciens résultats
        d3.select("#result").selectAll("div").remove();
        //affiche le résultat de la requête
        d3.select("#result").selectAll("div").data().enter().append('div')
            .html(d => {
                return d;
            });
    });
    */

</script>
</body>
</html>